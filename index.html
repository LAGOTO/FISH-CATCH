<!doctype html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Играй – Късмет за улова</title>
  <style>
    :root{
      --sea1:#0c2747; --sea2:#144a7a; --sky2:#cfeaff; --ui:#ffffff; --accent:#7bd389; --muted:#cfe2f5;
      --glass: rgba(255,255,255,.12); --glass-b: rgba(255,255,255,.18);
    }
    html,body{height:100%;margin:0}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;
      background:linear-gradient(#071426,#0a1b2a); color:var(--ui);
      display:flex; align-items:center; justify-content:center
    }

    /* важен фикс: фиксирана височина за стабилен преглед */
    .game{
      width:min(1100px,96vw);
      height:min(680px,78vh);
      position:relative; border-radius:20px; overflow:hidden;
      box-shadow:0 18px 50px rgba(0,0,0,.55);
      background:radial-gradient(1200px 600px at 50% -40%, var(--sky2), var(--sea1) 60%);
    }

    header{position:absolute; left:12px; right:12px; top:12px; display:flex; justify-content:space-between; align-items:center; z-index:8}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.3px}
    .dot{width:12px; height:12px; border-radius:50%; background:var(--accent); box-shadow:0 0 10px var(--accent)}
    .pill{backdrop-filter: blur(6px); background:var(--glass); border:1px solid var(--glass-b); padding:6px 10px; border-radius:999px; font-weight:700}

    .lake{position:absolute; inset:0;}
    .water{position:absolute; left:0; right:0; top:20%; bottom:0; background:linear-gradient(180deg, var(--sea2), var(--sea1));}
    .shore{position:absolute; left:0; right:0; bottom:0; height:14%; background:linear-gradient(180deg,#3c2b1a,#24190f);}
    .ripples{position:absolute; inset:0; pointer-events:none;}

    /* гридът е центриран и над фона */
    .grid{
      position:absolute; left:6%; right:6%; top:18%; bottom:18%;
      display:grid; grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,1fr);
      gap:12px; z-index:6;
    }
    .grid.locked{ pointer-events:none; opacity:0.9; }

    /* клетки – видими, с номера */
    .cell{
      position:relative; border-radius:12px;
      outline:2px dashed rgba(255,255,255,.55);
      background:rgba(255,255,255,.08);
      cursor:pointer; transition:transform .08s ease, background .15s ease;
      display:flex; align-items:center; justify-content:center;
    }
    .cell:hover{transform:translateY(-2px); background:rgba(255,255,255,.16)}
    .cell span{position:absolute; left:8px; top:6px; font-size:12px; color:var(--muted)}
    .cell b{font-size:22px; color:#ffffff; opacity:.9}

    /* сплаш + спинър */
    .splash{position:absolute; width:8px; height:8px; border-radius:50%; background:#fff; opacity:.9; pointer-events:none; transform:translate(-50%,-50%); animation:splash 1.2s ease-out forwards}
    @keyframes splash{ 0%{box-shadow:0 0 0 0 rgba(255,255,255,.6);} 100%{box-shadow:0 0 0 30px rgba(255,255,255,0); opacity:0} }

    .spinner{position:absolute; transform:translate(-50%,-50%); width:28px; height:28px; border-radius:50%;
      border:3px solid rgba(255,255,255,.35); border-top-color:#fff; animation:spin 0.8s linear infinite; z-index:14}
    @keyframes spin{to{transform:translate(-50%,-50%) rotate(360deg)}}

    /* балон „поп“ до зоната */
    .bubble{
      position:absolute; transform:translate(-50%,-100%) scale(.92); transform-origin:50% 100%;
      background:rgba(0,0,0,.35); border:1px solid var(--glass-b); border-radius:14px;
      padding:10px 12px; min-width:220px; z-index:15; opacity:0; animation:pop .18s ease-out forwards;
    }
    .bubble::after{content:""; position:absolute; left:50%; bottom:-10px; transform:translateX(-50%); border:10px solid transparent; border-top-color:rgba(0,0,0,.35)}
    .b-row{display:grid; grid-template-columns:auto 1fr; gap:6px 10px; font-size:14px}
    .b-title{margin:0 0 6px; font-weight:800}
    .b-actions{display:flex; gap:8px; margin-top:8px}
    .btn{cursor:pointer; border:0; border-radius:10px; padding:6px 10px; font-weight:800}
    .btn-primary{background:var(--accent)}
    .btn-ghost{background:transparent; color:#fff; outline:1px solid rgba(255,255,255,.35)}
    @keyframes pop{from{opacity:0; transform:translate(-50%,-100%) scale(.92)} to{opacity:1; transform:translate(-50%,-100%) scale(1)}}

    footer{position:absolute; inset:auto 12px 10px 12px; color:#d0e2f6; font-size:12px; display:flex; justify-content:space-between}
  </style>
</head>
<body>
  <div class="game" id="game">
    <header>
      <div class="brand"><span class="dot"></span> Lago • <b>HASWING</b></div>
      <div class="pill">Хвърляй!</div>
    </header>

    <div class="lake">
      <div class="water"></div>
      <div class="grid" id="grid"></div>
      <div class="ripples" id="ripples"></div>
      <div class="shore"></div>
    </div>

    <footer>
      <div>Съвет: близките квадрати са по-плитки; далечните – по-дълбоки.</div>
      <div>© Lag
